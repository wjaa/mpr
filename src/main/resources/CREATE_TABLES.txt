CREATE DATABASE mpr;
use mpr;

CREATE TABLE PORTA_RETRATO (
  ID INT(10) NOT NULL AUTO_INCREMENT,
  PR_CODE VARCHAR(20) NOT NULL,
  PRECO DOUBLE  NOT NULL,	
  NOME VARCHAR(70) NOT NULL,
  DESCRICAO VARCHAR (60 ) NOT NULL,
  TIPO CHAR (1) NOT NULL,
  QTDE INT(10) NOT NULL,
  PRIMARY KEY (ID)   
);

CREATE TABLE CONFIG (
  ID INT(10) NOT NULL AUTO_INCREMENT,
  PATH_IMG_PR VARCHAR (100) NOT NULL,
  PATH_UPLOAD VARCHAR (100) NOT NULL,
  PRIMARY KEY (ID) 
);

CREATE TABLE PEDIDO (
  ID INT(10) NOT NULL AUTO_INCREMENT,
  PATH_IMAGE VARCHAR (100) NOT NULL,
  DATA_PEDIDO DATETIME NOT NULL,
  ID_PORTA_RETRATO INT (10) NOT NULL,
  STATUS CHAR (1) NOT NULL,
  EMAIL_ENVIADO CHAR(1) NOT NULL,
  CODIGO_TRANSACAO VARCHAR(50),
  EMAIL_CLIENTE VARCHAR(100),
  PRIMARY KEY (ID) 
);


ALTER TABLE PEDIDO ADD STATUS CHAR(1) NOT NULL;
ALTER TABLE PEDIDO ADD EMAIL_ENVIADO CHAR(1) NOT NULL;
ALTER TABLE PEDIDO ADD CODIGO_TRANSACAO VARCHAR(50);
ALTER TABLE PEDIDO ADD EMAIL_CLIENTE VARCHAR(100);

/*novo*/
ALTER TABLE CONFIG ADD NUM_PARCELA INT(3);


CREATE TABLE CLIENTE (
  ID INT(10) NOT NULL AUTO_INCREMENT,
  NOME VARCHAR (80),
  EMAIL VARCHAR (100) NOT NULL,
  PRIMARY KEY (ID) 
);

/*15-04-2014*/
ALTER TABLE CLIENTE ADD DATA_CADASTRO DATETIME NOT NULL;
ALTER TABLE PEDIDO ADD ID_CLIENTE INT(10);

CREATE TABLE CUPOM (
  ID INT(10) NOT NULL AUTO_INCREMENT,
  CODIGO VARCHAR (30) NOT NULL,
  ATIVO INT(1) NOT NULL,
  DATA_VALIDADE DATE NOT NULL,
  PORCENTAGEM INT(5) NOT NULL,
  PRIMARY KEY (ID) 
);

/*22-04-2014*/
ALTER TABLE CONFIG ADD LIGA_GOOGLE_ANALYTICS INT(1);
ALTER TABLE CONFIG ADD LIGA_PREVIEW INT(1);

/*28-04-2014*/
ALTER TABLE CONFIG DROP LIGA_PREVIEW;
ALTER TABLE CONFIG ADD LIGA_DESCONTO INT(1);
ALTER TABLE CONFIG ADD PORCENT_DESCONTO DOUBLE;
ALTER TABLE PEDIDO ADD VALOR DOUBLE;